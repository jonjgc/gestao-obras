--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5
-- Dumped by pg_dump version 17.5

-- Started on 2026-02-20 13:38:20

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 4955 (class 1262 OID 24815)
-- Name: gestao_obras; Type: DATABASE; Schema: -; Owner: postgres
--

CREATE DATABASE gestao_obras WITH TEMPLATE = template0 ENCODING = 'UTF8' LOCALE_PROVIDER = libc LOCALE = 'Portuguese_Brazil.1252';


ALTER DATABASE gestao_obras OWNER TO postgres;

\connect gestao_obras

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 218 (class 1259 OID 24817)
-- Name: item; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.item (
    id bigint NOT NULL,
    descricao character varying(255) NOT NULL,
    quantidade numeric(38,2) NOT NULL,
    quantidade_acumulada numeric(38,2),
    valor_total numeric(38,2) NOT NULL,
    valor_unitario numeric(38,2) NOT NULL,
    orcamento_id bigint NOT NULL
);


ALTER TABLE public.item OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 24816)
-- Name: item_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.item ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.item_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 220 (class 1259 OID 24823)
-- Name: item_medicao; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.item_medicao (
    id bigint NOT NULL,
    quantidade_medida numeric(38,2) NOT NULL,
    valor_total_medido numeric(38,2) NOT NULL,
    item_id bigint NOT NULL,
    medicao_id bigint NOT NULL
);


ALTER TABLE public.item_medicao OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 24822)
-- Name: item_medicao_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.item_medicao ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.item_medicao_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 228 (class 1259 OID 24881)
-- Name: itens; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.itens (
    id bigint NOT NULL,
    descricao character varying(255),
    quantidade numeric(38,2),
    quantidade_acumulada numeric(38,2),
    valor_total numeric(38,2),
    valor_unitario numeric(38,2),
    orcamento_id bigint NOT NULL
);


ALTER TABLE public.itens OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 24880)
-- Name: itens_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.itens ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.itens_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 222 (class 1259 OID 24829)
-- Name: medicao; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.medicao (
    id bigint NOT NULL,
    data_medicao date NOT NULL,
    numero_medicao character varying(255) NOT NULL,
    observacao text,
    status character varying(255) NOT NULL,
    valor_medicao numeric(38,2) NOT NULL,
    orcamento_id bigint NOT NULL,
    CONSTRAINT medicao_status_check CHECK (((status)::text = ANY ((ARRAY['ABERTA'::character varying, 'VALIDADA'::character varying])::text[])))
);


ALTER TABLE public.medicao OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 24828)
-- Name: medicao_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.medicao ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.medicao_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 224 (class 1259 OID 24838)
-- Name: orcamento; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.orcamento (
    id bigint NOT NULL,
    data_criacao date NOT NULL,
    numero_protocolo character varying(255) NOT NULL,
    status character varying(255) NOT NULL,
    tipo_orcamento character varying(255) NOT NULL,
    valor_total numeric(38,2) NOT NULL,
    CONSTRAINT orcamento_status_check CHECK (((status)::text = ANY ((ARRAY['ABERTO'::character varying, 'FINALIZADO'::character varying])::text[])))
);


ALTER TABLE public.orcamento OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 24837)
-- Name: orcamento_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.orcamento ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.orcamento_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 226 (class 1259 OID 24847)
-- Name: usuarios; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.usuarios (
    id bigint NOT NULL,
    login character varying(255),
    senha character varying(255)
);


ALTER TABLE public.usuarios OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 24846)
-- Name: usuarios_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.usuarios ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.usuarios_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 4939 (class 0 OID 24817)
-- Dependencies: 218
-- Data for Name: item; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.item VALUES (1, 'Saco de Cimento', 2.00, 0.00, 100.00, 50.00, 1);
INSERT INTO public.item VALUES (2, 'Tijolos', 1000.00, 0.00, 30000.00, 30.00, 2);
INSERT INTO public.item VALUES (3, 'Cimento', 600.00, 0.00, 61200.00, 102.00, 2);
INSERT INTO public.item VALUES (4, 'Tinta Branca', 100.00, 0.00, 12000.00, 120.00, 2);


--
-- TOC entry 4941 (class 0 OID 24823)
-- Dependencies: 220
-- Data for Name: item_medicao; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.item_medicao VALUES (1, 1.00, 299.00, 3, 1);
INSERT INTO public.item_medicao VALUES (2, 300.00, 300000.00, 4, 2);


--
-- TOC entry 4949 (class 0 OID 24881)
-- Dependencies: 228
-- Data for Name: itens; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.itens VALUES (1, 'produto teste 01', 1000.00, 0.00, 400000.00, 400.00, 3);
INSERT INTO public.itens VALUES (2, 'produto teste 02', 800.00, 0.00, 12000.00, 15.00, 3);
INSERT INTO public.itens VALUES (3, 'teste', 1.00, 1.00, 299.00, 299.00, 4);
INSERT INTO public.itens VALUES (4, 'teste 02', 300.00, 300.00, 300000.00, 1000.00, 4);


--
-- TOC entry 4943 (class 0 OID 24829)
-- Dependencies: 222
-- Data for Name: medicao; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.medicao VALUES (1, '2026-02-20', 'MED-1771604091858', 'Medição realizada pelo sistema.', 'ABERTA', 299.00, 4);
INSERT INTO public.medicao VALUES (2, '2026-02-20', 'MED-1771604102236', 'Medição realizada pelo sistema.', 'ABERTA', 300000.00, 4);


--
-- TOC entry 4945 (class 0 OID 24838)
-- Dependencies: 224
-- Data for Name: orcamento; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.orcamento VALUES (1, '2026-02-19', '43022.123456/2026-01', 'ABERTO', 'Obra de Edificação', 100.00);
INSERT INTO public.orcamento VALUES (2, '2026-02-19', '43022.123456/2025-01', 'ABERTO', 'Obra de Edificação', 103200.00);
INSERT INTO public.orcamento VALUES (3, '2026-02-20', '43022.123456/2026-02', 'FINALIZADO', 'Obra de Edificação', 412000.00);
INSERT INTO public.orcamento VALUES (4, '2026-02-20', ' 43022.123456/2026-02', 'ABERTO', 'Obra de Edificação', 300299.00);


--
-- TOC entry 4947 (class 0 OID 24847)
-- Dependencies: 226
-- Data for Name: usuarios; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.usuarios VALUES (1, 'admin', '$2a$10$spPnEp8CuV2habnyADK6puXU0y.cL/cfO0iM9.a6XKEhD2BF7MQR6');


--
-- TOC entry 4956 (class 0 OID 0)
-- Dependencies: 217
-- Name: item_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.item_id_seq', 4, true);


--
-- TOC entry 4957 (class 0 OID 0)
-- Dependencies: 219
-- Name: item_medicao_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.item_medicao_id_seq', 2, true);


--
-- TOC entry 4958 (class 0 OID 0)
-- Dependencies: 227
-- Name: itens_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.itens_id_seq', 4, true);


--
-- TOC entry 4959 (class 0 OID 0)
-- Dependencies: 221
-- Name: medicao_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.medicao_id_seq', 2, true);


--
-- TOC entry 4960 (class 0 OID 0)
-- Dependencies: 223
-- Name: orcamento_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.orcamento_id_seq', 4, true);


--
-- TOC entry 4961 (class 0 OID 0)
-- Dependencies: 225
-- Name: usuarios_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.usuarios_id_seq', 1, true);


--
-- TOC entry 4772 (class 2606 OID 24827)
-- Name: item_medicao item_medicao_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.item_medicao
    ADD CONSTRAINT item_medicao_pkey PRIMARY KEY (id);


--
-- TOC entry 4770 (class 2606 OID 24821)
-- Name: item item_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.item
    ADD CONSTRAINT item_pkey PRIMARY KEY (id);


--
-- TOC entry 4786 (class 2606 OID 24885)
-- Name: itens itens_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.itens
    ADD CONSTRAINT itens_pkey PRIMARY KEY (id);


--
-- TOC entry 4774 (class 2606 OID 24836)
-- Name: medicao medicao_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.medicao
    ADD CONSTRAINT medicao_pkey PRIMARY KEY (id);


--
-- TOC entry 4778 (class 2606 OID 24845)
-- Name: orcamento orcamento_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.orcamento
    ADD CONSTRAINT orcamento_pkey PRIMARY KEY (id);


--
-- TOC entry 4780 (class 2606 OID 24857)
-- Name: orcamento ukh960o9gvtykebf94vpoe7k8xw; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.orcamento
    ADD CONSTRAINT ukh960o9gvtykebf94vpoe7k8xw UNIQUE (numero_protocolo);


--
-- TOC entry 4776 (class 2606 OID 24855)
-- Name: medicao uklbb2fw4w526qperilyxpe775r; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.medicao
    ADD CONSTRAINT uklbb2fw4w526qperilyxpe775r UNIQUE (numero_medicao);


--
-- TOC entry 4782 (class 2606 OID 24859)
-- Name: usuarios ukr8oo98o39ykr4hi57md9nibmw; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT ukr8oo98o39ykr4hi57md9nibmw UNIQUE (login);


--
-- TOC entry 4784 (class 2606 OID 24853)
-- Name: usuarios usuarios_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT usuarios_pkey PRIMARY KEY (id);


--
-- TOC entry 4791 (class 2606 OID 24875)
-- Name: medicao fk4fsgrf77r45i2tthw8867eetd; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.medicao
    ADD CONSTRAINT fk4fsgrf77r45i2tthw8867eetd FOREIGN KEY (orcamento_id) REFERENCES public.orcamento(id);


--
-- TOC entry 4788 (class 2606 OID 24886)
-- Name: item_medicao fk9ycg5hbfl8hfhhynoxpldv4g7; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.item_medicao
    ADD CONSTRAINT fk9ycg5hbfl8hfhhynoxpldv4g7 FOREIGN KEY (item_id) REFERENCES public.itens(id);


--
-- TOC entry 4789 (class 2606 OID 24870)
-- Name: item_medicao fkewa6alewgjq7l7atfu36uladq; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.item_medicao
    ADD CONSTRAINT fkewa6alewgjq7l7atfu36uladq FOREIGN KEY (medicao_id) REFERENCES public.medicao(id);


--
-- TOC entry 4792 (class 2606 OID 24891)
-- Name: itens fkf7r1g0cdcddjpsstd10o7eqls; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.itens
    ADD CONSTRAINT fkf7r1g0cdcddjpsstd10o7eqls FOREIGN KEY (orcamento_id) REFERENCES public.orcamento(id);


--
-- TOC entry 4787 (class 2606 OID 24860)
-- Name: item fkrb08ut9dq0nmq6qwqv4egfw5s; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.item
    ADD CONSTRAINT fkrb08ut9dq0nmq6qwqv4egfw5s FOREIGN KEY (orcamento_id) REFERENCES public.orcamento(id);


--
-- TOC entry 4790 (class 2606 OID 24865)
-- Name: item_medicao fksn22dtmgp4mgbhj3vxxy9q1vp; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.item_medicao
    ADD CONSTRAINT fksn22dtmgp4mgbhj3vxxy9q1vp FOREIGN KEY (item_id) REFERENCES public.item(id);


-- Completed on 2026-02-20 13:38:21

--
-- PostgreSQL database dump complete
--

